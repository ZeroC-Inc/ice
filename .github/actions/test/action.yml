name: Test Ice

inputs:
  language:
    description: "Language to test"
    required: true
    # default: "1"
    # options: ["cpp", "csharp", "java", "python", "js", "swift", "php", "ruby"]

  flags:
    description: "Flags to pass to the test"
    required: false
    default: ""
    # options: ["cpp", "csharp", "java", "python", "js", "swift", "php", "ruby"]

runs:
  using: "composite"
  steps:
    - name: Test
      run: python3 allTests.py --workers=3 --language=${{ inputs.language }} ${{ inputs.flags }}
      shell: bash
      if: startsWith(matrix.os, 'ubuntu') || startsWith(matrix.os, 'macos')

    - name: Test
      run: python allTests.py --platform=x64 --workers=3 --language=${{ inputs.language }} ${{ inputs.flags }}
      shell: powershell
      if: startsWith(matrix.os, 'windows')
